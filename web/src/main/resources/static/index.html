<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <link type="text/css" rel="stylesheet" href="css/bootstrap.css?05022016"/>
    <link rel="stylesheet" type="text/css" href="css/jquery.qtip.min.css?05022016">
    <link type="text/css" rel="stylesheet" href="css/style.css?05022016"/>
    <script type="text/javascript" src="js/jquery-1.11.1.min.js?05022016"></script>
    <script type="text/javascript" src="js/d3.v3.min.js?05022016"></script>
    <script type="text/javascript" src="js/bootstrap.js?05022016"></script>
    <script type="text/javascript" src="js/jquery.qtip.min.js?05022016"></script>
    <script type="text/javascript" src="js/clipboard.min.js?05022016"></script>
    <script type="text/javascript" src="js/showdown-1.8.6.min.js?02072018"></script>
    <script type="text/javascript" src="js/main.js?02072018"></script>
    <script type="text/javascript" src="js/tree.js?02072018"></script>
  </head>

  <body>
    <div id="body" class="container">
      
      <!-- start of tabs nav div-->
      <ul  class="nav nav-tabs" id="tabs" role="tablist">
        <li class="nav-item">
          <a class="nav-link active" href="#tree" id="home-tab" data-toggle="tab" role="tab" aria-controls="profile">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#news"  id="news-tab" data-toggle="tab" role="tab" aria-controls="profile">News</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#api" id="api-tab" data-toggle="tab" role="tab" aria-controls="profile">API</a>
        </li>
      </ul>
      <!-- end of tabs nav div -->
      
      <!-- start of tabs content div -->
      <div class="tab-content">
        <!-- tree tab -->
        <div class="tab-pane fade" id="tree" role="tabpanel">
          <div class="row">
            <div class="col-lg-6 col-md-8 col-sm-12 col-xs-12">
              <br><b>CMO Tumor Type Tree</b><br>
              Please send all comments and suggestions to <a href="mailto:oncotree@googlegroups.com?Subject=Oncotree comment" target="_top"><u>oncotree@googlegroups.com</u></a><br>
              If you cannot see the tree below in Internet Explorer, please use Firefox or Chrome.
              <br/>
              <span id="summary-info"></span>
              <br/>
              <span>Oncotree verison currently displayed: </span>
              <span id="other-version">
                <select class="other-version-content"></select>
              </span>
              <br><br><div class="alert alert-info" role="alert"><span id='version-note'>Version Note: </span></div>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-4 col-md-5 col-sm-6 col-xs-9 has-addon-feedback">
              <div class="input-group" id='tumor_search'>
                <input type="text" class="form-control" placeholder="Search Tumor Type" />
                <span id="searchRemoveIcon" class="form-control-feedback glyphicon glyphicon-remove-circle"></span>
                <span id="searchResult" class="form-control-feedback result"></span>
                <span class="input-group-btn">
                  <button type="button" class="btn btn-default">Search</button>
                </span>
              </div>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
              <div class="btn-group">
                <button type="button" class="btn btn-default" id='expand-nodes-btn'>
                  <span class="glyphicon glyphicon-resize-full"></span>
                </button>

                <button type="button" class="btn btn-default" id='collapse-nodes-btn'>
                  <span class="glyphicon glyphicon-resize-small"></span>
                </button>
              </div>
            </div>
          </div>
          <div id="tree"></div>
          <div id="summary-duplicates" class="col-lg-6 col-md-8 col-sm-12 col-xs-12">
            <b>Acronym crash:</b>
            <p id="" class="bg-danger"></p>
          </div>
          <span id="top-link-block" class="hidden">
            <a href="#top" class="well well-sm"  onclick="$('html,body').animate({scrollTop:0, scrollLeft: 0},'slow');return false;">
                <i class="glyphicon glyphicon-chevron-up"></i> Back to Top
            </a>
          </span>
        </div>

        <!-- news tab -->
        <div class="tab-pane fade" id='news' role="tabpanel">
          <div class="embed-responsive embed-responsive-16by9"></div>
        </div>

        <!-- api tab -->
        <div class="tab-pane fade" id='api' role="tabpanel">
          <div class="embed-responsive embed-responsive-16by9" style='margin: 30px' id='api-embed-dev'>
              <iframe class="embed-responsive-item swagger-frame" src="swagger-ui.html"></iframe>

          </div>
        </div>

      </div>
      <!-- end of tabs content div -->

    </div>
  </body>
</html>

<script>
  function loadNews(callback) {
      var newsURL = "https://raw.githubusercontent.com/cBioPortal/oncotree/master/docs/News.md";
      $.ajax({
          type: 'GET',
          url: newsURL,
      }).done(function(data) {
          if (data !== null) {
              callback(data);
          }
      }).fail(function(data) {
          callback("An unknown error occurred. Unable to load news.");
      });
  }

  function displayNews(news) {
      if (news === null) {
          $("#news").html("An unknown error occurred. Unable to download news.");
      } else {
          showdown.setFlavor('github');
          var converter = new showdown.Converter(),
              text = news,
              html = converter.makeHtml(text);
          $("#news").html(html);
      }
  }

  $(document).ready(function() {
     $(function () {
        $('#tabs li:first-child a').tab('show')
      })
      loadNews(displayNews);
      $('#api-embed-dev').css('height', $(window).height() +'px');
      $('#api-embed-dev').css('width', ($(window).width() - 500) +'px');
  });

</script>

